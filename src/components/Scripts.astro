<script>
  // Check for user preference
  if (localStorage.getItem("darkMode") === null) {
    // Check system preference
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      localStorage.setItem("darkMode", "true");
      document.documentElement.classList.add("dark");
    } else {
      localStorage.setItem("darkMode", "false");
    }
  }

  // Handle page transitions
  document.addEventListener("astro:page-load", () => {
    // This runs on initial page load and after each navigation
    const pageWrapper = document.getElementById("page-wrapper");
    if (pageWrapper) {
      pageWrapper.classList.add("page-loaded");
    }
  });

  document.addEventListener("astro:before-swap", () => {
    // This runs before the new page content is swapped in
    const pageWrapper = document.getElementById("page-wrapper");
    if (pageWrapper) {
      pageWrapper.classList.remove("page-loaded");
    }
  });
</script>
<script src="../scripts/transitions.js"></script>
